import OutCall "http-outcalls/outcall";import Map "mo:core/Map";import Text "mo:core/Text";import Array "mo:core/Array";import Timer "mo:core/Timer";import Storage "blob-storage/Storage";import Iter "mo:core/Iter";import Time "mo:core/Time";import Principal "mo:core/Principal";import Runtime "mo:core/Runtime";import MixinStorage "blob-storage/Mixin";import MixinAuthorization "authorization/MixinAuthorization";import AccessControl "authorization/access-control";actor {  // Proxy Response Handling  public type ProxyResponse = {    statusCode : Nat;    responseBody : Text; // For now return as text    headers : [(Text, Text)];    url : Text;  };  // Allowlist persistent store  let allowlistEntries = Map.empty<Text, AllowListEntry>();  // State for HTTP outcalls must be persistent for timers to work across requests.  let permanentState = Map.empty<Text, ProxyRequest>();  let inFlightRequests = Map.empty<Text, Timer.TimerId>();  // Record the original request parameters.  type ProxyRequest = {    caller : Principal;    url : Text;    timestamp : Time.Time;  };  // Allowlist Entry  type AllowListEntry = {    caller : Principal;    timestamp : Time.Time;  };  // Storage  include MixinStorage();  // Authentication  let accessControlState = AccessControl.initState();  include MixinAuthorization(accessControlState);
